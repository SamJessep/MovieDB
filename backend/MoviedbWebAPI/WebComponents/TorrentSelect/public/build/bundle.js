var tselect=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function l(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function i(e){e.parentNode.removeChild(e)}function u(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function h(){return d("")}function p(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}e.selectedIndex=-1}function $(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function v(e){const t={};for(const n of e)t[n.name]=n.value;return t}let _;function y(e){_=e}function x(){if(!_)throw new Error("Function called outside component initialization");return _}const N=[],k=[],E=[],S=[],w=Promise.resolve();let T=!1;function j(){T||(T=!0,w.then(O))}function C(e){E.push(e)}let V=!1;const M=new Set;function O(){if(!V){V=!0;do{for(let e=0;e<N.length;e+=1){const t=N[e];y(t),I(t.$$)}for(y(null),N.length=0;k.length;)k.pop()();for(let e=0;e<E.length;e+=1){const t=E[e];M.has(t)||(M.add(t),t())}E.length=0}while(N.length);for(;S.length;)S.pop()();T=!1,V=!1,M.clear()}}function I(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const L=new Set;let A,H;function q(e,t){e&&e.i&&(L.delete(e),e.i(t))}function P(e,t){const n=t.token={};function l(e,l,r,s){if(t.token!==n)return;t.resolved=s;let c=t.ctx;void 0!==r&&(c=c.slice(),c[r]=s);const i=e&&(t.current=e)(c);let u=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(A={r:0,c:[],p:A},function(e,t,n,o){if(e&&e.o){if(L.has(e))return;L.add(e),A.c.push((()=>{L.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),A.r||o(A.c),A=A.p)})):t.block.d(1),i.c(),q(i,1),i.m(t.mount(),t.anchor),u=!0),t.block=i,t.blocks&&(t.blocks[l]=i),u&&O()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const n=x();if(e.then((e=>{y(n),l(t.then,1,t.value,e),y(null)}),(e=>{if(y(n),l(t.catch,2,t.error,e),y(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}else{if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}var r}function R(r,s,c,u,a,d,f,h=[-1]){const p=_;y(r);const m=r.$$={fragment:null,ctx:null,props:d,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:s.context||[]),callbacks:n(),dirty:h,skip_bound:!1,root:s.target||p.$$.root};f&&f(m.root);let g=!1;if(m.ctx=c?c(r,s.props||{},((e,t,...n)=>{const o=n.length?n[0]:t;return m.ctx&&a(m.ctx[e],m.ctx[e]=o)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](o),g&&function(e,t){-1===e.$$.dirty[0]&&(N.push(e),j(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(r,e)),t})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!u&&u(m.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);m.fragment&&m.fragment.l(e),e.forEach(i)}else m.fragment&&m.fragment.c();s.intro&&q(r.$$.fragment),function(e,n,r,s){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=e.$$;c&&c.m(n,r),s||C((()=>{const n=i.map(t).filter(l);u?u.push(...n):o(n),e.$$.on_mount=[]})),a.forEach(C)}(r,s.target,s.anchor,s.customElement),O()}y(p)}function z(e,t,n){const o=e.slice();return o[20]=t[n],o}function F(e,t,n){const o=e.slice();return o[24]=t[n],o}function B(e,t,n){const o=e.slice();return o[27]=t[n],o}function D(e){let t,n,l,r,g,$,v,_=e[0],y=[];for(let t=0;t<_.length;t+=1)y[t]=U(B(e,_,t));let x=null;_.length||(x=J());let N=null!==e[3].Season&&G(e);return{c(){t=a("label"),n=d("Season\r\n\t\t"),l=a("select");for(let e=0;e<y.length;e+=1)y[e].c();x&&x.c(),r=f(),N&&N.c(),g=h(),m(l,"data-tselect",""),m(l,"name","season"),m(l,"placeholder","Season"),void 0===e[3].Season&&C((()=>e[12].call(l)))},m(o,i){c(o,t,i),s(t,n),s(t,l);for(let e=0;e<y.length;e+=1)y[e].m(l,null);x&&x.m(l,null),b(l,e[3].Season),c(o,r,i),N&&N.m(o,i),c(o,g,i),$||(v=[p(l,"change",e[12]),p(l,"change",e[13])],$=!0)},p(e,t){if(1&t){let n;for(_=e[0],n=0;n<_.length;n+=1){const o=B(e,_,n);y[n]?y[n].p(o,t):(y[n]=U(o),y[n].c(),y[n].m(l,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=_.length,_.length?x&&(x.d(1),x=null):x||(x=J(),x.c(),x.m(l,null))}9&t&&b(l,e[3].Season),null!==e[3].Season?N?N.p(e,t):(N=G(e),N.c(),N.m(g.parentNode,g)):N&&(N.d(1),N=null)},d(e){e&&i(t),u(y,e),x&&x.d(),e&&i(r),N&&N.d(e),e&&i(g),$=!1,o(v)}}}function J(e){let t;return{c(){t=a("option"),t.textContent="No seasons found",t.selected=!0,t.disabled=!0,t.__value="",t.value=t.__value},m(e,n){c(e,t,n)},d(e){e&&i(t)}}}function U(e){let t,n,o,l,r,u=e[27].Number+"",f=e[27].Name+"";return{c(){t=a("option"),n=d(u),o=d(": "),l=d(f),t.__value=r=e[27].Number,t.value=t.__value},m(e,r){c(e,t,r),s(t,n),s(t,o),s(t,l)},p(e,o){1&o&&u!==(u=e[27].Number+"")&&g(n,u),1&o&&f!==(f=e[27].Name+"")&&g(l,f),1&o&&r!==(r=e[27].Number)&&(t.__value=r,t.value=t.__value)},d(e){e&&i(t)}}}function G(e){let t,n,l,r,f,h=e[0].find(e[14]).Episodes,g=[];for(let t=0;t<h.length;t+=1)g[t]=Q(F(e,h,t));let $=null;return h.length||($=K()),{c(){t=a("label"),n=d("Episode\r\n\t\t\t"),l=a("select");for(let e=0;e<g.length;e+=1)g[e].c();$&&$.c(),m(l,"data-tselect",""),m(l,"name","episode"),m(l,"placeholder","Episode"),void 0===e[3].Episode&&C((()=>e[15].call(l)))},m(o,i){c(o,t,i),s(t,n),s(t,l);for(let e=0;e<g.length;e+=1)g[e].m(l,null);$&&$.m(l,null),b(l,e[3].Episode),r||(f=[p(l,"change",e[15]),p(l,"change",e[7])],r=!0)},p(e,t){if(9&t){let n;for(h=e[0].find(e[14]).Episodes,n=0;n<h.length;n+=1){const o=F(e,h,n);g[n]?g[n].p(o,t):(g[n]=Q(o),g[n].c(),g[n].m(l,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=h.length,h.length?$&&($.d(1),$=null):$||($=K(),$.c(),$.m(l,null))}9&t&&b(l,e[3].Episode)},d(e){e&&i(t),u(g,e),$&&$.d(),r=!1,o(f)}}}function K(e){let t;return{c(){t=a("option"),t.textContent="No episodes found",t.selected=!0,t.disabled=!0,t.__value="",t.value=t.__value},m(e,n){c(e,t,n)},d(e){e&&i(t)}}}function Q(e){let t,n,o,l,r,u=e[24].Number+"",f=e[24].Name+"";return{c(){t=a("option"),n=d(u),o=d(": "),l=d(f),t.__value=r=e[24].Number,t.value=t.__value},m(e,r){c(e,t,r),s(t,n),s(t,o),s(t,l)},p(e,o){9&o&&u!==(u=e[24].Number+"")&&g(n,u),9&o&&f!==(f=e[24].Name+"")&&g(l,f),9&o&&r!==(r=e[24].Number)&&(t.__value=r,t.value=t.__value)},d(e){e&&i(t)}}}function W(e){let t,n=e[4]&&X(e);return{c(){n&&n.c(),t=h()},m(e,o){n&&n.m(e,o),c(e,t,o)},p(e,o){e[4]?n?n.p(e,o):(n=X(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&i(t)}}}function X(e){let t,n,o={ctx:e,current:null,token:null,hasCatch:!0,pending:ne,then:Z,catch:Y,value:19,error:23};return P(n=e[5],o),{c(){t=h(),o.block.c()},m(e,n){c(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t},p(t,l){e=t,o.ctx=e,32&l&&n!==(n=e[5])&&P(n,o)||function(e,t,n){const o=t.slice(),{resolved:l}=e;e.current===e.then&&(o[e.value]=l),e.current===e.catch&&(o[e.error]=l),e.block.p(o,n)}(o,e,l)},d(e){e&&i(t),o.block.d(e),o.token=null,o=null}}}function Y(e){let t,n,o=e[23]+"";return{c(){t=a("span"),n=d(o)},m(e,o){c(e,t,o),s(t,n)},p(e,t){32&t&&o!==(o=e[23]+"")&&g(n,o)},d(e){e&&i(t)}}}function Z(e){let t,n,o,l,r,f=e[19],h=[];for(let t=0;t<f.length;t+=1)h[t]=te(z(e,f,t));let g=null;return f.length||(g=ee()),{c(){t=a("label"),n=d("Torrent\r\n\t\t\t\t"),o=a("select");for(let e=0;e<h.length;e+=1)h[e].c();g&&g.c(),m(o,"data-tselect",""),m(o,"name","torrent"),m(o,"placeholder","Torrent"),void 0===e[3].Torrent&&C((()=>e[16].call(o)))},m(i,u){c(i,t,u),s(t,n),s(t,o);for(let e=0;e<h.length;e+=1)h[e].m(o,null);g&&g.m(o,null),b(o,e[3].Torrent),l||(r=p(o,"change",e[16]),l=!0)},p(e,t){if(32&t){let n;for(f=e[19],n=0;n<f.length;n+=1){const l=z(e,f,n);h[n]?h[n].p(l,t):(h[n]=te(l),h[n].c(),h[n].m(o,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=f.length,f.length?g&&(g.d(1),g=null):g||(g=ee(),g.c(),g.m(o,null))}9&t&&b(o,e[3].Torrent)},d(e){e&&i(t),u(h,e),g&&g.d(),l=!1,r()}}}function ee(e){let t;return{c(){t=a("option"),t.textContent="No links found",t.selected=!0,t.disabled=!0,t.__value="",t.value=t.__value},m(e,n){c(e,t,n)},d(e){e&&i(t)}}}function te(e){let t,n,o,l=e[20].text+"";return{c(){t=a("option"),n=d(l),t.__value=o=e[20].value,t.value=t.__value},m(e,o){c(e,t,o),s(t,n)},p(e,r){32&r&&l!==(l=e[20].text+"")&&g(n,l),32&r&&o!==(o=e[20].value)&&(t.__value=o,t.value=t.__value)},d(e){e&&i(t)}}}function ne(t){let n;return{c(){n=d("Fetching Links... :)")},m(e,t){c(e,n,t)},p:e,d(e){e&&i(n)}}}function oe(t){let n,o,l,r,u,h,g,b,$=t[1]==t[2].TV&&D(t),v=(null!==t[3].Season&&null!==t[3].Episode||t[1]==t[2].MOVIE)&&W(t);return{c(){n=a("div"),$&&$.c(),o=f(),v&&v.c(),l=f(),r=a("button"),u=d("Download"),this.c=e,m(r,"data-button",""),r.disabled=h=!t[3],m(n,"class","extra-feature")},m(e,i){c(e,n,i),$&&$.m(n,null),s(n,o),v&&v.m(n,null),s(n,l),s(n,r),s(r,u),g||(b=p(r,"click",t[6]),g=!0)},p(e,[t]){e[1]==e[2].TV?$?$.p(e,t):($=D(e),$.c(),$.m(n,o)):$&&($.d(1),$=null),null!==e[3].Season&&null!==e[3].Episode||e[1]==e[2].MOVIE?v?v.p(e,t):(v=W(e),v.c(),v.m(n,l)):v&&(v.d(1),v=null),9&t&&h!==(h=!e[3])&&(r.disabled=h)},i:e,o:e,d(e){e&&i(n),$&&$.d(),v&&v.d(),g=!1,b()}}}function le(e,t,n){var o,l=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(l,r){function s(e){try{i(o.next(e))}catch(e){r(e)}}function c(e){try{i(o.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}i((o=o.apply(e,t||[])).next())}))};!function(e){e.MOVIE="MOVIE",e.TV="TV"}(o||(o={}));let{title:r="Harry Potter"}=t,{server:s="https://localhost:5001/api/dl/links"}=t,{options:c=[{value:123,text:"321"}]}=t,{seasons:i=[{Number:1,Name:"Season 1",Episodes:[{Name:"episode 1",Number:1},{Name:"episode 2",Number:2},{Name:"episode 3",Number:3}]},{Number:2,Name:"Season 2",Episodes:[{Name:"episode 1",Number:1}]},{Number:3,Name:"Season 3",Episodes:[]}]}=t,{seasonsjson:u}=t;if(u){const e=unescape(u);i=JSON.parse(e)}let a,{mediatype:d=o.MOVIE}=t,f={Season:null,Episode:null,Torrent:null},h=!1;const p=()=>{n(5,a=l(void 0,void 0,void 0,(function*(){const e=d==o.TV?r+" S0"+f.Season+" E0"+f.Episode:r,t=yield fetch(s+"?query="+encodeURI(e));return yield t.json()}))),n(4,h=!0)};var m;m=()=>l(void 0,void 0,void 0,(function*(){yield(j(),w),d==o.MOVIE&&p()})),x().$$.on_mount.push(m);return e.$$set=e=>{"title"in e&&n(8,r=e.title),"server"in e&&n(9,s=e.server),"options"in e&&n(10,c=e.options),"seasons"in e&&n(0,i=e.seasons),"seasonsjson"in e&&n(11,u=e.seasonsjson),"mediatype"in e&&n(1,d=e.mediatype)},[i,d,o,f,h,a,()=>window.location.href=f.Torrent,p,r,s,c,u,function(){f.Season=$(this),n(3,f),n(0,i)},()=>{console.log(f,i,i.find((e=>e.Number==f.Season))),null!==f.Episode&&p()},e=>e.Number==f.Season,function(){f.Episode=$(this),n(3,f),n(0,i)},function(){f.Torrent=$(this),n(3,f),n(0,i)}]}"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(l);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class re extends H{constructor(e){super(),this.shadowRoot.innerHTML="<style>label{display:block}select{max-width:100%;display:block;max-width:100%;flex-grow:1;background-color:#3a3a3a;padding:0.25rem;color:#ffffff;border-radius:0.2rem;border:solid #2c2c2c 2px}button{border-radius:0.2rem;padding:0.3rem;font-size:1rem;background-color:#3a3a3a;color:#ffffff;transition:border 0.2s;border:solid 2px #ffffff;width:fit-content;display:flex;text-align:center;align-items:center;cursor:pointer}</style>",R(this,{target:this.shadowRoot,props:v(this.attributes),customElement:!0},le,oe,r,{title:8,server:9,options:10,seasons:0,seasonsjson:11,mediatype:1},null),e&&(e.target&&c(e.target,this,e.anchor),e.props&&(this.$set(e.props),O()))}static get observedAttributes(){return["title","server","options","seasons","seasonsjson","mediatype"]}get title(){return this.$$.ctx[8]}set title(e){this.$$set({title:e}),O()}get server(){return this.$$.ctx[9]}set server(e){this.$$set({server:e}),O()}get options(){return this.$$.ctx[10]}set options(e){this.$$set({options:e}),O()}get seasons(){return this.$$.ctx[0]}set seasons(e){this.$$set({seasons:e}),O()}get seasonsjson(){return this.$$.ctx[11]}set seasonsjson(e){this.$$set({seasonsjson:e}),O()}get mediatype(){return this.$$.ctx[1]}set mediatype(e){this.$$set({mediatype:e}),O()}}return customElements.define("t-select",re),re}();
//# sourceMappingURL=bundle.js.map
