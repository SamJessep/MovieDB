var torrentselect=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function l(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function i(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function h(){return d("")}function p(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}e.selectedIndex=-1}function v(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function b(e){const t={};for(const n of e)t[n.name]=n.value;return t}let _;function y(e){_=e}function E(){if(!_)throw new Error("Function called outside component initialization");return _}const N=[],x=[],k=[],S=[],T=Promise.resolve();let w=!1;function V(){w||(w=!0,T.then(M))}function j(e){k.push(e)}let C=!1;const O=new Set;function M(){if(!C){C=!0;do{for(let e=0;e<N.length;e+=1){const t=N[e];y(t),I(t.$$)}for(y(null),N.length=0;x.length;)x.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];O.has(t)||(O.add(t),t())}k.length=0}while(N.length);for(;S.length;)S.pop()();w=!1,C=!1,O.clear()}}function I(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}const L=new Set;let A,H;function q(e,t){e&&e.i&&(L.delete(e),e.i(t))}function P(e,t){const n=t.token={};function l(e,l,s,r){if(t.token!==n)return;t.resolved=r;let c=t.ctx;void 0!==s&&(c=c.slice(),c[s]=r);const u=e&&(t.current=e)(c);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(A={r:0,c:[],p:A},function(e,t,n,o){if(e&&e.o){if(L.has(e))return;L.add(e),A.c.push((()=>{L.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),A.r||o(A.c),A=A.p)})):t.block.d(1),u.c(),q(u,1),u.m(t.mount(),t.anchor),i=!0),t.block=u,t.blocks&&(t.blocks[l]=u),i&&M()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=E();if(e.then((e=>{y(n),l(t.then,1,t.value,e),y(null)}),(e=>{if(y(n),l(t.catch,2,t.error,e),y(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}else{if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}var s}function F(s,r,c,i,a,d,f,h=[-1]){const p=_;y(s);const m=s.$$={fragment:null,ctx:null,props:d,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:r.context||[]),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||p.$$.root};f&&f(m.root);let g=!1;if(m.ctx=c?c(s,r.props||{},((e,t,...n)=>{const o=n.length?n[0]:t;return m.ctx&&a(m.ctx[e],m.ctx[e]=o)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](o),g&&function(e,t){-1===e.$$.dirty[0]&&(N.push(e),V(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(s,e)),t})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!i&&i(m.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);m.fragment&&m.fragment.l(e),e.forEach(u)}else m.fragment&&m.fragment.c();r.intro&&q(s.$$.fragment),function(e,n,s,r){const{fragment:c,on_mount:u,on_destroy:i,after_update:a}=e.$$;c&&c.m(n,s),r||j((()=>{const n=u.map(t).filter(l);i?i.push(...n):o(n),e.$$.on_mount=[]})),a.forEach(j)}(s,r.target,r.anchor,r.customElement),M()}y(p)}function R(e,t,n){const o=e.slice();return o[19]=t[n],o}function z(e,t,n){const o=e.slice();return o[23]=t[n],o}function B(e,t,n){const o=e.slice();return o[26]=t[n],o}function D(e){let t,n,l,s,g,v,b,_=e[0],y=[];for(let t=0;t<_.length;t+=1)y[t]=U(B(e,_,t));let E=null;_.length||(E=J());let N=null!==e[3].Season&&G(e);return{c(){t=a("label"),n=d("Season\r\n\t\t"),l=a("select");for(let e=0;e<y.length;e+=1)y[e].c();E&&E.c(),s=f(),N&&N.c(),g=h(),m(l,"name","season"),m(l,"placeholder","Season"),void 0===e[3].Season&&j((()=>e[11].call(l)))},m(o,u){c(o,t,u),r(t,n),r(t,l);for(let e=0;e<y.length;e+=1)y[e].m(l,null);E&&E.m(l,null),$(l,e[3].Season),c(o,s,u),N&&N.m(o,u),c(o,g,u),v||(b=[p(l,"change",e[11]),p(l,"change",e[12])],v=!0)},p(e,t){if(1&t){let n;for(_=e[0],n=0;n<_.length;n+=1){const o=B(e,_,n);y[n]?y[n].p(o,t):(y[n]=U(o),y[n].c(),y[n].m(l,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=_.length,_.length?E&&(E.d(1),E=null):E||(E=J(),E.c(),E.m(l,null))}9&t&&$(l,e[3].Season),null!==e[3].Season?N?N.p(e,t):(N=G(e),N.c(),N.m(g.parentNode,g)):N&&(N.d(1),N=null)},d(e){e&&u(t),i(y,e),E&&E.d(),e&&u(s),N&&N.d(e),e&&u(g),v=!1,o(b)}}}function J(e){let t;return{c(){t=a("option"),t.textContent="No seasons found",t.selected=!0,t.disabled=!0,t.__value="",t.value=t.__value},m(e,n){c(e,t,n)},d(e){e&&u(t)}}}function U(e){let t,n,o,l,s,i=e[26].Number+"",f=e[26].Name+"";return{c(){t=a("option"),n=d(i),o=d(": "),l=d(f),t.__value=s=e[26].Number,t.value=t.__value},m(e,s){c(e,t,s),r(t,n),r(t,o),r(t,l)},p(e,o){1&o&&i!==(i=e[26].Number+"")&&g(n,i),1&o&&f!==(f=e[26].Name+"")&&g(l,f),1&o&&s!==(s=e[26].Number)&&(t.__value=s,t.value=t.__value)},d(e){e&&u(t)}}}function G(e){let t,n,l,s,f,h=e[0].find(e[13]).Episodes,g=[];for(let t=0;t<h.length;t+=1)g[t]=Q(z(e,h,t));let v=null;return h.length||(v=K()),{c(){t=a("label"),n=d("Episode\r\n\t\t\t"),l=a("select");for(let e=0;e<g.length;e+=1)g[e].c();v&&v.c(),m(l,"name","episode"),m(l,"placeholder","Episode"),void 0===e[3].Episode&&j((()=>e[14].call(l)))},m(o,u){c(o,t,u),r(t,n),r(t,l);for(let e=0;e<g.length;e+=1)g[e].m(l,null);v&&v.m(l,null),$(l,e[3].Episode),s||(f=[p(l,"change",e[14]),p(l,"change",e[6])],s=!0)},p(e,t){if(9&t){let n;for(h=e[0].find(e[13]).Episodes,n=0;n<h.length;n+=1){const o=z(e,h,n);g[n]?g[n].p(o,t):(g[n]=Q(o),g[n].c(),g[n].m(l,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=h.length,h.length?v&&(v.d(1),v=null):v||(v=K(),v.c(),v.m(l,null))}9&t&&$(l,e[3].Episode)},d(e){e&&u(t),i(g,e),v&&v.d(),s=!1,o(f)}}}function K(e){let t;return{c(){t=a("option"),t.textContent="No episodes found",t.selected=!0,t.disabled=!0,t.__value="",t.value=t.__value},m(e,n){c(e,t,n)},d(e){e&&u(t)}}}function Q(e){let t,n,o,l,s,i=e[23].Number+"",f=e[23].Name+"";return{c(){t=a("option"),n=d(i),o=d(": "),l=d(f),t.__value=s=e[23].Number,t.value=t.__value},m(e,s){c(e,t,s),r(t,n),r(t,o),r(t,l)},p(e,o){9&o&&i!==(i=e[23].Number+"")&&g(n,i),9&o&&f!==(f=e[23].Name+"")&&g(l,f),9&o&&s!==(s=e[23].Number)&&(t.__value=s,t.value=t.__value)},d(e){e&&u(t)}}}function W(e){let t,n,o={ctx:e,current:null,token:null,hasCatch:!0,pending:te,then:Y,catch:X,value:18,error:22};return P(n=e[4],o),{c(){t=h(),o.block.c()},m(e,n){c(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t},p(t,l){e=t,o.ctx=e,16&l&&n!==(n=e[4])&&P(n,o)||function(e,t,n){const o=t.slice(),{resolved:l}=e;e.current===e.then&&(o[e.value]=l),e.current===e.catch&&(o[e.error]=l),e.block.p(o,n)}(o,e,l)},d(e){e&&u(t),o.block.d(e),o.token=null,o=null}}}function X(e){let t,n,o=e[22]+"";return{c(){t=a("span"),n=d(o)},m(e,o){c(e,t,o),r(t,n)},p(e,t){16&t&&o!==(o=e[22]+"")&&g(n,o)},d(e){e&&u(t)}}}function Y(e){let t,n,o,l,s,f=e[18],h=[];for(let t=0;t<f.length;t+=1)h[t]=ee(R(e,f,t));let g=null;return f.length||(g=Z()),{c(){t=a("label"),n=d("Torrent\r\n\t\t\t"),o=a("select");for(let e=0;e<h.length;e+=1)h[e].c();g&&g.c(),m(o,"name","torrent"),m(o,"placeholder","Torrent"),void 0===e[3].Torrent&&j((()=>e[15].call(o)))},m(u,i){c(u,t,i),r(t,n),r(t,o);for(let e=0;e<h.length;e+=1)h[e].m(o,null);g&&g.m(o,null),$(o,e[3].Torrent),l||(s=p(o,"change",e[15]),l=!0)},p(e,t){if(16&t){let n;for(f=e[18],n=0;n<f.length;n+=1){const l=R(e,f,n);h[n]?h[n].p(l,t):(h[n]=ee(l),h[n].c(),h[n].m(o,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=f.length,f.length?g&&(g.d(1),g=null):g||(g=Z(),g.c(),g.m(o,null))}9&t&&$(o,e[3].Torrent)},d(e){e&&u(t),i(h,e),g&&g.d(),l=!1,s()}}}function Z(e){let t;return{c(){t=a("option"),t.textContent="No links found",t.selected=!0,t.disabled=!0,t.__value="",t.value=t.__value},m(e,n){c(e,t,n)},d(e){e&&u(t)}}}function ee(e){let t,n,o,l=e[19].Text+"";return{c(){t=a("option"),n=d(l),t.__value=o=e[19].Value,t.value=t.__value},m(e,o){c(e,t,o),r(t,n)},p(e,s){16&s&&l!==(l=e[19].Text+"")&&g(n,l),16&s&&o!==(o=e[19].Value)&&(t.__value=o,t.value=t.__value)},d(e){e&&u(t)}}}function te(t){let n;return{c(){n=d("Fetching Links... :)")},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function ne(t){let n,o,l,s,i,h,g,$,v,b,_=t[1]==t[2].TV&&D(t),y=(null!==t[3].Season&&null!==t[3].Episode||t[1]==t[2].MOVIE)&&W(t);return{c(){n=a("h1"),n.textContent="HELLO",o=f(),l=a("div"),_&&_.c(),s=f(),y&&y.c(),i=f(),h=a("button"),g=d("Download"),this.c=e,h.disabled=$=!t[3],m(l,"class","extra-feature")},m(e,u){c(e,n,u),c(e,o,u),c(e,l,u),_&&_.m(l,null),r(l,s),y&&y.m(l,null),r(l,i),r(l,h),r(h,g),v||(b=p(h,"click",t[5]),v=!0)},p(e,[t]){e[1]==e[2].TV?_?_.p(e,t):(_=D(e),_.c(),_.m(l,s)):_&&(_.d(1),_=null),null!==e[3].Season&&null!==e[3].Episode||e[1]==e[2].MOVIE?y?y.p(e,t):(y=W(e),y.c(),y.m(l,i)):y&&(y.d(1),y=null),9&t&&$!==($=!e[3])&&(h.disabled=$)},i:e,o:e,d(e){e&&u(n),e&&u(o),e&&u(l),_&&_.d(),y&&y.d(),v=!1,b()}}}function oe(e,t,n){var o,l=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(l,s){function r(e){try{u(o.next(e))}catch(e){s(e)}}function c(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,c)}u((o=o.apply(e,t||[])).next())}))};!function(e){e.MOVIE="MOVIE",e.TV="TV"}(o||(o={}));let{title:s="Harry Potter"}=t,{server:r="https://localhost:5001/api/dl/links"}=t,{options:c=[{Value:123,Text:"321"}]}=t,{seasons:u=[{Number:1,Name:"Season 1",Episodes:[{Name:"episode 1",Number:1},{Name:"episode 2",Number:2},{Name:"episode 3",Number:3}]},{Number:2,Name:"Season 2",Episodes:[{Name:"episode 1",Number:1}]},{Number:3,Name:"Season 3",Episodes:[]}]}=t,{seasonsjson:i}=t;if(i){const e=unescape(i);u=JSON.parse(e),console.log("SEASONS",u)}let a,{mediatype:d=o.TV}=t,f={Season:null,Episode:null,Torrent:null};const h=()=>n(4,a=l(void 0,void 0,void 0,(function*(){const e=d==o.TV?s+" S0"+f.Season+" E0"+f.Episode:s,t=yield fetch(r+"?query="+encodeURI(e));return yield t.json()})));var p;d==o.MOVIE&&h(),p=()=>l(void 0,void 0,void 0,(function*(){yield(V(),T)})),E().$$.on_mount.push(p);return e.$$set=e=>{"title"in e&&n(7,s=e.title),"server"in e&&n(8,r=e.server),"options"in e&&n(9,c=e.options),"seasons"in e&&n(0,u=e.seasons),"seasonsjson"in e&&n(10,i=e.seasonsjson),"mediatype"in e&&n(1,d=e.mediatype)},[u,d,o,f,a,()=>window.location.href=f.Torrent,h,s,r,c,i,function(){f.Season=v(this),n(3,f),n(0,u)},()=>{console.log(f,u,u.find((e=>e.Number==f.Season))),null!==f.Episode&&h()},e=>e.Number==f.Season,function(){f.Episode=v(this),n(3,f),n(0,u)},function(){f.Torrent=v(this),n(3,f),n(0,u)}]}"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(t).filter(l);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class le extends H{constructor(e){super(),F(this,{target:this.shadowRoot,props:b(this.attributes),customElement:!0},oe,ne,s,{title:7,server:8,options:9,seasons:0,seasonsjson:10,mediatype:1},null),e&&(e.target&&c(e.target,this,e.anchor),e.props&&(this.$set(e.props),M()))}static get observedAttributes(){return["title","server","options","seasons","seasonsjson","mediatype"]}get title(){return this.$$.ctx[7]}set title(e){this.$$set({title:e}),M()}get server(){return this.$$.ctx[8]}set server(e){this.$$set({server:e}),M()}get options(){return this.$$.ctx[9]}set options(e){this.$$set({options:e}),M()}get seasons(){return this.$$.ctx[0]}set seasons(e){this.$$set({seasons:e}),M()}get seasonsjson(){return this.$$.ctx[10]}set seasonsjson(e){this.$$set({seasonsjson:e}),M()}get mediatype(){return this.$$.ctx[1]}set mediatype(e){this.$$set({mediatype:e}),M()}}return customElements.define("torrent-select",le),le}();
//# sourceMappingURL=bundle.js.map
